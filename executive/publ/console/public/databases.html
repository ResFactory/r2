<!DOCTYPE html>
<!-- follow guidelines in README.md, see FOUC section for why display:none is used-->
<html lang="en" style="display:none">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="./path.actuate.css" />
    <script src="./path.actuate.js" type="module"></script>
</head>

<body>
    <main>
        <article>
            <header>
                <h1>Databases</h1>
            </header>

            <section class="card">
                <div class="card-body">
                    <h5 class="card-title">Content</h5>
                    <div id="content-databases-json">
                        No database connections were established.
                        This could be either because no cached content needed updating or it was a reload request and
                        database connections are being ignored.
                    </div>
                </div>
            </section>

            <section class="card">
                <div class="card-body">
                    <h5 class="card-title">Publication Server</h5>
                    <div id="publ-server-databases-json"></div>
                </div>
            </section>
        </article>
    </main>

    <script src="https://cdn.rawgit.com/caldwell/renderjson/master/renderjson.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch("/publication/inspect/databases/content.json").then(resp => resp.json()).then(databases => {
                if (databases && (
                    (Array.isArray(databases) && databases.length > 0) ||
                    (typeof databases === "object" && Object.keys(database).length > 0))
                ) {
                    renderjson.set_show_to_level(2);
                    document.getElementById("content-databases-json").prepend(renderjson(databases));
                }
            });

            fetch("/publication/inspect/databases/server.json").then(resp => resp.json()).then(databases => {
                renderjson.set_show_to_level(2);
                document.getElementById("publ-server-databases-json").prepend(renderjson(databases));
            })
        });
    </script>
</body>

</html>