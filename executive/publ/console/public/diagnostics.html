<!DOCTYPE html>
<!-- follow guidelines in README.md, see FOUC section for why display:none is used-->
<html lang="en" style="display:none">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="./path.actuate.css" />
    <script src="//cdn.rawgit.com/Alorel/console-log-html/master/console-log-html.min.js"></script>
    <script src="./universal.lib.js"></script>
    <script type="module">
        import { actuationStrategy } from "./path.lib.js";
        // prepare global `executive` and "bootstrap" or _actuate_ the page.
        const strategy = actuationStrategy().args;
        const executive = strategy.actuate();
        executive.consoleTunnel.addEventSourceEventListener("console.log", (evt) => {
            console.log(JSON.parse(evt.data));
        });
        executive.consoleTunnel.addEventSourceEventListener("console.error", (evt) => {
            console.log(JSON.parse(evt.data));
        });
    </script>
    <script>
        /**
          * Uses https://github.com/Alorel/console-log-html to redirect console.* output to an HTML DOM element.
          * @param {*} redirectConsoleContainerID
          */
        // deno-lint-ignore no-unused-vars
        const redirectConsoleToHTML = (redirectConsoleContainerID = "container_redirectConsole") => {
            const consoleLogWarningStyles = `
                color: #fff;
                background-color: #c23934;
                display: block;
                text-align: center;
                padding: 8px 32px;
                font: 100 16px/28px sans-serif;
                background-image: linear-gradient(45deg,rgba(0,0,0,.025) 25%,transparent 25%,transparent 50%,rgba(0,0,0,.025) 50%,rgba(0,0,0,.025) 75%,transparent 75%,transparent);
                background-size: 64px 64px;
            `;

            const ldsRedirectConsoleContainer = document.getElementById(redirectConsoleContainerID);
            if (ldsRedirectConsoleContainer) {
                ConsoleLogHTML.connect(ldsRedirectConsoleContainer);
                console.log(`Alorel/console-log-html Ready.`);
            } else {
                console.log(
                    "%c%s",
                    consoleLogWarningStyles,
                    `Element with ID '${redirectConsoleContainerID}' required by redirectConsoleToHTML() does not exist.`,
                );
            }
        };
    </script>
</head>

<body>
    <main>
        <article>
            <header>Diagnostics</header>

            <ul id="container_redirectConsole">
            </ul>
        </article>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                redirectConsoleToHTML();
            });
        </script>
    </main>
</body>

</html>